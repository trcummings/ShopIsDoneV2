[gd_scene load_steps=31 format=3 uid="uid://dq2epbd2snfbt"]

[ext_resource type="Script" path="res://arenas/Arena.cs" id="1_loukv"]
[ext_resource type="Script" path="res://util/state_machine/StateMachine.cs" id="2_1igvu"]
[ext_resource type="Script" path="res://util/state_machine/State.cs" id="3_q440h"]
[ext_resource type="Script" path="res://arenas/states/InitializingState.cs" id="3_s3t2k"]
[ext_resource type="Script" path="res://arenas/states/battle_states/BattlePhaseManager.cs" id="4_c0td2"]
[ext_resource type="Script" path="res://tiles/TileManager.cs" id="4_hwpdd"]
[ext_resource type="Script" path="res://arenas/states/RunningState.cs" id="4_oqnwb"]
[ext_resource type="Script" path="res://arenas/EnterArenaArea.cs" id="5_2f7tb"]
[ext_resource type="PackedScene" uid="uid://k1cfuob2nivk" path="res://tiles/tile/tile.tscn" id="5_hl2gx"]
[ext_resource type="PackedScene" uid="uid://d3bnxo337mk18" path="res://tiles/tile/placement_tile.tscn" id="6_4mx0t"]
[ext_resource type="Script" path="res://arenas/states/battle_states/TurnCountdownBattleState.cs" id="6_maxjv"]
[ext_resource type="Texture2D" uid="uid://dhf1etn3y82a2" path="res://tiles/diamond_floor.png" id="6_s8win"]
[ext_resource type="Script" path="res://arenas/states/battle_states/CleanUpBattleState.cs" id="7_dwkpa"]
[ext_resource type="Script" path="res://arenas/states/FinishedState.cs" id="7_wmirh"]
[ext_resource type="Script" path="res://arenas/states/battle_states/EnemyActivityBattleState.cs" id="8_om56i"]
[ext_resource type="Script" path="res://arenas/states/battle_states/PrepPlayerTurnBattleState.cs" id="9_quvvh"]
[ext_resource type="Script" path="res://arenas/states/battle_states/PlayerTurnBattleState.cs" id="10_hv83v"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/ChoosingUnitState.cs" id="12_jioot"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/EndingTurnState.cs" id="13_sabdx"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/ChoosingActionState.cs" id="14_rj6r3"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/choosing_action_states/MenuState.cs" id="15_quash"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/choosing_action_states/FacingDirectionState.cs" id="16_sn5g2"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/choosing_action_states/MoveState.cs" id="17_mdtsr"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/choosing_action_states/TargetingState.cs" id="18_12jle"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/RunningActionState.cs" id="19_3o4ep"]
[ext_resource type="Script" path="res://arenas/states/player_turn_states/MoreInfoState.cs" id="20_por72"]
[ext_resource type="Script" path="res://arenas/states/finished_states/OutOfTimeFinishedState.cs" id="22_qh40g"]
[ext_resource type="Script" path="res://arenas/states/finished_states/VictoryFinishedState.cs" id="23_2yhgl"]
[ext_resource type="Script" path="res://arenas/states/finished_states/FailureFinishedState.cs" id="24_ych7k"]

[sub_resource type="BoxShape3D" id="BoxShape3D_gufqt"]
size = Vector3(0.646393, 1, 6)

[node name="Arena" type="Node3D" node_paths=PackedStringArray("_TileManager", "_ArenaStateMachine") groups=["arena"]]
script = ExtResource("1_loukv")
_TileManager = NodePath("Tiles")
_ArenaStateMachine = NodePath("ArenaStateMachine")
metadata/_edit_lock_ = true

[node name="ArenaStateMachine" type="Node" parent="."]
script = ExtResource("2_1igvu")

[node name="Initializing" type="Node" parent="ArenaStateMachine"]
script = ExtResource("3_s3t2k")

[node name="Running" type="Node" parent="ArenaStateMachine"]
script = ExtResource("4_oqnwb")

[node name="BattlePhaseManager" type="Node" parent="ArenaStateMachine/Running" node_paths=PackedStringArray("CurrentPhase", "PhaseOrder", "_BattleStateMachine")]
script = ExtResource("4_c0td2")
CurrentPhase = NodePath("../BattleStateMachine/CleanUp")
PhaseOrder = [NodePath("../BattleStateMachine/TurnCountdown"), NodePath("../BattleStateMachine/CleanUp"), NodePath("../BattleStateMachine/EnemyActivity"), NodePath("../BattleStateMachine/PrepPlayerTurn"), NodePath("../BattleStateMachine/PlayerTurn")]
_BattleStateMachine = NodePath("../BattleStateMachine")

[node name="BattleStateMachine" type="Node" parent="ArenaStateMachine/Running"]
script = ExtResource("2_1igvu")

[node name="TurnCountdown" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine"]
script = ExtResource("6_maxjv")

[node name="CleanUp" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine"]
script = ExtResource("7_dwkpa")

[node name="EnemyActivity" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine"]
script = ExtResource("8_om56i")

[node name="PrepPlayerTurn" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine"]
script = ExtResource("9_quvvh")

[node name="PlayerTurn" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine"]
script = ExtResource("10_hv83v")

[node name="PlayerTurnStateMachine" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn"]
script = ExtResource("2_1igvu")

[node name="Idle" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("3_q440h")

[node name="ChoosingUnit" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("12_jioot")

[node name="EndingTurn" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("13_sabdx")

[node name="ChoosingAction" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("14_rj6r3")

[node name="ActionStateMachine" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine/ChoosingAction"]
script = ExtResource("2_1igvu")

[node name="Menu" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine/ChoosingAction/ActionStateMachine"]
script = ExtResource("15_quash")

[node name="FacingDirection" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine/ChoosingAction/ActionStateMachine"]
script = ExtResource("16_sn5g2")

[node name="Move" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine/ChoosingAction/ActionStateMachine"]
script = ExtResource("17_mdtsr")

[node name="Targeting" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine/ChoosingAction/ActionStateMachine"]
script = ExtResource("18_12jle")

[node name="RunningAction" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("19_3o4ep")

[node name="MoreInfo" type="Node" parent="ArenaStateMachine/Running/BattleStateMachine/PlayerTurn/PlayerTurnStateMachine"]
script = ExtResource("20_por72")

[node name="Finished" type="Node" parent="ArenaStateMachine"]
script = ExtResource("7_wmirh")

[node name="OutcomeStateMachine" type="Node" parent="ArenaStateMachine/Finished"]
script = ExtResource("2_1igvu")

[node name="OutOfTime" type="Node" parent="ArenaStateMachine/Finished/OutcomeStateMachine"]
script = ExtResource("22_qh40g")

[node name="Victory" type="Node" parent="ArenaStateMachine/Finished/OutcomeStateMachine"]
script = ExtResource("23_2yhgl")

[node name="Failure" type="Node" parent="ArenaStateMachine/Finished/OutcomeStateMachine"]
script = ExtResource("24_ych7k")

[node name="Tiles" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)
script = ExtResource("4_hwpdd")
_TileScenes = Array[PackedScene]([ExtResource("5_hl2gx"), ExtResource("6_4mx0t")])

[node name="EnterArenaArea" type="Area3D" parent="." node_paths=PackedStringArray("_Arena") groups=["arena_entrance"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.1839, 0, 0)
collision_layer = 0
collision_mask = 2
monitorable = false
script = ExtResource("5_2f7tb")
_Arena = NodePath("..")
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="EnterArenaArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.676804, 0.5, 2.08165e-12)
shape = SubResource("BoxShape3D_gufqt")

[node name="Sprite3D" type="Sprite3D" parent="EnterArenaArea"]
transform = Transform3D(0.76722, 0, 0, 0, 1, 0, 0, 0, 2.33261, 2.08165e-12, 0.01, 2.08165e-12)
axis = 1
texture = ExtResource("6_s8win")
